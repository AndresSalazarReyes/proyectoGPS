<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cartera</title>
    <link rel="stylesheet" href="stylesCartera.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="brand">
                
                <img src="../Images/logoSinFondo.PNG" alt="Logo" class="logo">
            </div>
            <ul class="menu">
                <li class="menu-item"><a href="../activosView/activos.html" >Activos</a></li>

                <li class="menu-item"><a href="../suspendidosView/suspendidos.html">Suspendidos</a></li>
            
                <li class="menu-item"><a href="../carteraView/Cartera.html" class="active">Cartera</a></li>

                <li class="menu-item"><a href="../instalcionesView/instalaciones.html">Instalaciones</a></li>

                <li class="menu-item"><a href="../vehiculosView/vehiculos.html">Vehículos</a></li>

                <li class="menu-item"><a href="../revisionView/revision.html">Revisiones </a></li>

                <li class="menu-item"><a href="../gpsView/gps.html">GPS</a></li>

                <li class="menu-item"><a href="../usuariosView/usuarios.html">Usuarios</a></li>
            </ul>
            <div class="logout">
                <a href="#">Cerrar sesión</a>
            </div>
        </nav>
        

        <!-- Main Content -->
        <div class="main-content">
            <!-- Encabezado con el rectángulo blanco -->
            <div class="header">
                <h1>Cartera</h1>
                <!-- Espacio para los iconos que agregarás después -->
                <div class="icons-space"></div>
            </div>

            <!-- Campo de búsqueda (Debajo del encabezado) -->
            <div class="search-container">
                <input type="text" placeholder="Deseo ver los servicios instalados en este año...">
                <button type="submit">Enviar</button>
            </div>

            <!-- Tabla con botones a la derecha -->
            <section class="data-table">
                <div class="table-wrapper">

                    <div class="table-header">
                        <div class="table-title">
                            Listado de pagos
                        </div>
                    <!-- Botones en el lado derecho -->
                    <div class="table-buttons">
                        
                        <button class="btn_actulizar">Actualizar Pago</button>
                    </div>
                        <table id="dataTable">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>Cliente</th>
                                    <th>Placa </th>
                                    <th>Fecha de Pago</th>
                                    <th>Pago </th>
                                    <th>Próximo Pago</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Aquí se insertarán las filas dinámicamente -->
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </div>


<div id="pagos-container">
    <h2>Pagos</h2>
    <button id="recordar-pagos-btn">Recordar Pagos Pendientes</button>
    <button id="avisar-pagos-btn">Avisar Pagos del Día</button>
    <button id="notificar-cancelacion-btn">Notificar Cancelación</button>
    <div id="result-container"></div>
</div>


<!-- es la parte de las notificaciones-->
<button id="btnNotificacion">Verificar Notificación</button>
<div id="resultado"></div>

<script>
  document.getElementById('btnNotificacion').addEventListener('click', async () => {
    const placa = document.getElementById('placaInput').value;
    const response = await fetch(`/api/notificacion/${placa}`);
    const data = await response.json();

    if (data.enviarNotificacion) {
      document.getElementById('resultado').innerText = 'Notificación: Se requiere recordatorio de pago.';
    } else {
      document.getElementById('resultado').innerText = 'No se requiere notificación en este momento.';
    }
  });
</script>


        <!-- Script para cargar la tabla dinámicamente -->
        <script src="../js/pagos.js"></script>

        


        <!-- Script para manejo de modales -->

    </body>
</html>
